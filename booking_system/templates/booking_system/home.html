{% extends 'booking_system/base.html' %}
{% load static %}

{% block content %}
    <div class="container mt-4">
        <h1 class="text-center mt-4">Welcome to the Online Movie Ticket Booking System</h1>

        {% if user.is_authenticated %}
            <div class="text-center mt-3">
                <p>Hello, {{ user.username }}!</p>
                <a href="{% url 'profile' %}" class="btn btn-success me-2">View Profile</a>
                <a href="{% url 'logout' %}" class="btn btn-danger">Logout</a>
            </div>
        {% else %}
            <div class="text-center mt-3">
                <a href="{% url 'login' %}" class="btn btn-primary me-2">Login</a>
                <a href="{% url 'register' %}" class="btn btn-secondary">Register</a>
            </div>
        {% endif %}
    </div>

<!-- Swiper Section (Carousel) -->
<div class="swiper-container my-5">
    <div class="swiper-wrapper">
        <div class="swiper-slide">
            <img src="{% static 'images/avengers.jpg' %}" class="img-fluid" alt="Banner 1">
        </div>
        <div class="swiper-slide">
            <img src="{% static 'images/blackwidow.jpg' %}" class="img-fluid" alt="Banner 2">
        </div>
        <div class="swiper-slide">
            <img src="{% static 'images/spiderman.jpg' %}" class="img-fluid" alt="Banner 3">
        </div>
    </div>
    <!-- Add Pagination -->
    <div class="swiper-pagination"></div>
    <!-- Add Navigation -->
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
</div>

<!-- Now Showing Section -->
<div class="container mt-5">
    <h2 class="text-center mb-5">Now Showing ðŸŽ¬</h2>
    <div class="row justify-content-center">
        {% for movie in movies %}
        <!-- Movie Card -->
        <div class="col-md-4 col-lg-3 d-flex align-items-stretch mb-4">
            <div class="card h-100 shadow-sm">
                <img src="{{ movie.poster.url }}" class="card-img-top" alt="{{ movie.title }}">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ movie.title }}</h5>
                    <div class="mb-2">
                        {% for showtime in movie.showtime_set.all|slice:":3" %}
                        <small class="text-muted d-block">
                            {{ showtime.time }} ({{ showtime.date }})
                        </small>
                        {% endfor %}
                    </div>
                    <div class="mt-auto">
                        {% with movie.showtime_set.first as showtime %}
                        {% if showtime %}
                        <a href="{% url 'book_now' showtime.id %}" class="btn btn-primary btn-sm w-100">Book Now</a>
                        {% endif %}
                        {% endwith %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

    <!-- Promotional Banner -->
    <div class="text-center mt-5 mb-5">
        <h3>Exclusive Offer!</h3>
        <p>Get 50% off on your first booking! Use code <strong>MOVIE50</strong> at checkout.</p>
        <a href="#" class="btn btn-warning">Book Now</a>
    </div>
{% endblock %}
#hp creation